# PhotoSafe Production Environment Configuration Example
#
# Copy this file to .env.production and customize the values
# Then run: docker-compose --env-file .env.production up -d
#
# Or copy to .env for the default docker-compose up command

# Database Configuration
POSTGRES_DB=photosafe
POSTGRES_USER=photosafe
# IMPORTANT: Set a strong password for production!
POSTGRES_PASSWORD=change-this-to-a-strong-password

# API Configuration
VITE_API_URL=http://backend:8000

# Port Mappings
# For production behind a reverse proxy, you may want to change these
# or remove port mappings from docker-compose.yml entirely
BACKEND_PORT=8000:8000
FRONTEND_PORT=5000:5173

# Service Commands (Production Mode)
# These disable hot-reload and run optimized builds
BACKEND_COMMAND=sh -c "alembic upgrade head && uvicorn app.main:app --host 0.0.0.0 --port 8000"
FRONTEND_COMMAND=npm run preview -- --host 0.0.0.0

# Restart Policy
# Use "always" for production to ensure services restart after reboot
RESTART_POLICY=always

# Git SHA for version tracking
# Set this in CI/CD to track deployed versions
GIT_SHA=production

# Production Deployment Notes:
# 1. Use docker-compose.prod.yml override to disable volume mounts:
#    docker-compose -f docker-compose.yml -f docker-compose.prod.yml --env-file .env.production up -d
# 2. The multi-stage Dockerfiles bake code into images for production
# 3. Rebuild images when code changes: ./build.sh && docker-compose up -d

